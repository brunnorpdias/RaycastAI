"use strict";var g=Object.create;var f=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var w=Object.getPrototypeOf,L=Object.prototype.hasOwnProperty;var P=(e,s)=>{for(var a in s)f(e,a,{get:s[a],enumerable:!0})},d=(e,s,a,t)=>{if(s&&typeof s=="object"||typeof s=="function")for(let n of v(s))!L.call(e,n)&&n!==a&&f(e,n,{get:()=>s[n],enumerable:!(t=x(s,n))||t.enumerable});return e};var $=(e,s,a)=>(a=e!=null?g(w(e)):{},d(s||!e||!e.__esModule?f(a,"default",{value:e,enumerable:!0}):a,e)),I=e=>d(f({},"__esModule",{value:!0}),e);var N={};P(N,{generateTypeScriptDefinitions:()=>D});module.exports=I(N);var y=$(require("fs"));var R=/[\p{Lu}]/u,S=/[\p{Ll}]/u,h=/^[\p{Lu}](?![\p{Lu}])/gu,E=/([\p{Alpha}\p{N}_]|$)/u,p=/[_.\- ]+/,b=new RegExp("^"+p.source),m=new RegExp(p.source+E.source,"gu"),A=new RegExp("\\d+"+E.source,"gu"),k=(e,s,a,t)=>{let n=!1,r=!1,o=!1,u=!1;for(let l=0;l<e.length;l++){let c=e[l];u=l>2?e[l-3]==="-":!0,n&&R.test(c)?(e=e.slice(0,l)+"-"+e.slice(l),n=!1,o=r,r=!0,l++):r&&o&&S.test(c)&&(!u||t)?(e=e.slice(0,l-1)+"-"+e.slice(l-1),o=r,r=!1,n=!0):(n=s(c)===c&&a(c)!==c,o=r,r=a(c)===c&&s(c)!==c)}return e},T=(e,s)=>(h.lastIndex=0,e.replaceAll(h,a=>s(a))),U=(e,s)=>(m.lastIndex=0,A.lastIndex=0,e.replaceAll(A,(a,t,n)=>["_","-"].includes(e.charAt(n+a.length))?a:s(a)).replaceAll(m,(a,t)=>s(t)));function i(e,s){if(!(typeof e=="string"||Array.isArray(e)))throw new TypeError("Expected the input to be `string | string[]`");if(s={pascalCase:!1,preserveConsecutiveUppercase:!1,...s},Array.isArray(e)?e=e.map(r=>r.trim()).filter(r=>r.length).join("-"):e=e.trim(),e.length===0)return"";let a=s.locale===!1?r=>r.toLowerCase():r=>r.toLocaleLowerCase(s.locale),t=s.locale===!1?r=>r.toUpperCase():r=>r.toLocaleUpperCase(s.locale);return e.length===1?p.test(e)?"":s.pascalCase?t(e):a(e):(e!==a(e)&&(e=k(e,a,t,s.preserveConsecutiveUppercase)),e=e.replace(b,""),e=s.preserveConsecutiveUppercase?T(e,a):a(e),s.pascalCase&&(e=t(e.charAt(0))+e.slice(1)),U(e,t))}function D(e,s){let a=`type ExtensionPreferences = ${C(e.preferences)}

/** Preferences accessible in all the extension's commands */
declare type Preferences = ExtensionPreferences
`,t="",n=!1;e.commands.forEach((r,o)=>{n=!0,o===0&&(a+=`
declare namespace Preferences {
`,t+=`declare namespace Arguments {
`),a+=`  /** Preferences accessible in the \`${r.name}\` command */
  export type ${i(r.name,{preserveConsecutiveUppercase:!0,pascalCase:!0})} = ExtensionPreferences & ${C(r.preferences||[])}
`,t+=`  /** Arguments passed to the \`${r.name}\` command */
  export type ${i(r.name,{preserveConsecutiveUppercase:!0,pascalCase:!0})} = ${_(r.arguments)}
`,o===e.commands.length-1&&(t+=`}
`)}),n&&(a+=`}
`),y.writeFileSync("raycast-env.d.ts",`/// <reference types="@raycast/api">

/* \u{1F6A7} \u{1F6A7} \u{1F6A7}
 * This file is auto-generated from the extension's manifest.
 * Do not modify manually. Instead, update the \`package.json\` file.
 * \u{1F6A7} \u{1F6A7} \u{1F6A7} */

/* eslint-disable @typescript-eslint/ban-types */

${a}
${t}
${s.join(`

`)}`)}function C(e){let s="{";return(e||[]).forEach((a,t)=>{switch(t===0&&(s+=`
`),s+=`  /** ${a.title} - ${a.description} */
  "${a.name}"`,(!a.required&&a.default==null||a.type==="appPicker")&&(s+="?"),s+=": ",a.type){case"textfield":case"password":case"file":case"directory":s+="string";break;case"checkbox":s+="boolean";break;case"appPicker":s+='import("@raycast/api").Application';break;case"dropdown":s+=a.data?.map(n=>`"${n.value}"`).join(" | ")||"unknown";break;default:s+="unknown"}t<(e||[]).length-1&&(s+=","),s+=`
`}),s+="}",s}function _(e){let s="{";return(e||[]).forEach((a,t)=>{switch(t===0&&(s+=`
`),s+=`  /** ${a.placeholder} */
  "${a.name}": `,a.type){case"text":case"password":s+="string";break;case"dropdown":s+=a.data?.map(n=>`"${n.value}"`).join(" | ")||"unknown";break;default:s+="unknown"}t<(e||[]).length-1&&(s+=","),s+=`
`}),s+="}",s}0&&(module.exports={generateTypeScriptDefinitions});
