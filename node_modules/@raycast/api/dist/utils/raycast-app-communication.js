"use strict";var de=Object.create;var A=Object.defineProperty;var pe=Object.getOwnPropertyDescriptor;var ge=Object.getOwnPropertyNames;var me=Object.getPrototypeOf,he=Object.prototype.hasOwnProperty;var y=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),ye=(e,r)=>{for(var t in r)A(e,t,{get:r[t],enumerable:!0})},U=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let s of ge(r))!he.call(e,s)&&s!==t&&A(e,s,{get:()=>r[s],enumerable:!(i=pe(r,s))||i.enumerable});return e};var p=(e,r,t)=>(t=e!=null?de(me(e)):{},U(r||!e||!e.__esModule?A(t,"default",{value:e,enumerable:!0}):t,e)),we=e=>U(A({},"__esModule",{value:!0}),e);var z=y((Ve,X)=>{var Ce=require("node:tty"),Ie=Ce?.WriteStream?.prototype?.hasColors?.()??!1,o=(e,r)=>{if(!Ie)return s=>s;let t=`\x1B[${e}m`,i=`\x1B[${r}m`;return s=>{let a=s+"",c=a.indexOf(i);if(c===-1)return t+a+i;let f=t,u=0;for(;c!==-1;)f+=a.slice(u,c)+t,u=c+i.length,c=a.indexOf(i,u);return f+=a.slice(u)+i,f}},n={};n.reset=o(0,0);n.bold=o(1,22);n.dim=o(2,22);n.italic=o(3,23);n.underline=o(4,24);n.overline=o(53,55);n.inverse=o(7,27);n.hidden=o(8,28);n.strikethrough=o(9,29);n.black=o(30,39);n.red=o(31,39);n.green=o(32,39);n.yellow=o(33,39);n.blue=o(34,39);n.magenta=o(35,39);n.cyan=o(36,39);n.white=o(37,39);n.gray=o(90,39);n.bgBlack=o(40,49);n.bgRed=o(41,49);n.bgGreen=o(42,49);n.bgYellow=o(43,49);n.bgBlue=o(44,49);n.bgMagenta=o(45,49);n.bgCyan=o(46,49);n.bgWhite=o(47,49);n.bgGray=o(100,49);n.redBright=o(91,39);n.greenBright=o(92,39);n.yellowBright=o(93,39);n.blueBright=o(94,39);n.magentaBright=o(95,39);n.cyanBright=o(96,39);n.whiteBright=o(97,39);n.bgRedBright=o(101,49);n.bgGreenBright=o(102,49);n.bgYellowBright=o(103,49);n.bgBlueBright=o(104,49);n.bgMagentaBright=o(105,49);n.bgCyanBright=o(106,49);n.bgWhiteBright=o(107,49);X.exports=n});var N=y((er,V)=>{"use strict";var K=require("fs"),O;function ve(){try{return K.statSync("/.dockerenv"),!0}catch{return!1}}function Se(){try{return K.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}V.exports=()=>(O===void 0&&(O=ve()||Se()),O)});var ee=y((rr,R)=>{"use strict";var Pe=require("os"),Te=require("fs"),Q=N(),Z=()=>{if(process.platform!=="linux")return!1;if(Pe.release().toLowerCase().includes("microsoft"))return!Q();try{return Te.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Q():!1}catch{return!1}};process.env.__IS_WSL_TEST__?R.exports=Z:R.exports=Z()});var te=y((tr,re)=>{"use strict";re.exports=(e,r,t)=>{let i=s=>Object.defineProperty(e,r,{value:s,enumerable:!0,writable:!0});return Object.defineProperty(e,r,{configurable:!0,enumerable:!0,get(){let s=t();return i(s),s},set(s){i(s)}}),e}});var ue=y((nr,ce)=>{var Be=require("path"),Oe=require("child_process"),{promises:$,constants:ae}=require("fs"),I=ee(),Ne=N(),F=te(),ne=Be.join(__dirname,"xdg-open"),{platform:h,arch:oe}=process,Re=()=>{try{return $.statSync("/run/.containerenv"),!0}catch{return!1}},D;function De(){return D===void 0&&(D=Re()||Ne()),D}var Fe=(()=>{let e="/mnt/",r;return async function(){if(r)return r;let t="/etc/wsl.conf",i=!1;try{await $.access(t,ae.F_OK),i=!0}catch{}if(!i)return e;let s=await $.readFile(t,{encoding:"utf8"}),a=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(s);return a?(r=a.groups.mountPoint.trim(),r=r.endsWith("/")?r:`${r}/`,r):e}})(),se=async(e,r)=>{let t;for(let i of e)try{return await r(i)}catch(s){t=s}throw t},v=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return se(e.app,f=>v({...e,app:f}));let{name:r,arguments:t=[]}=e.app||{};if(t=[...t],Array.isArray(r))return se(r,f=>v({...e,app:{name:f,arguments:t}}));let i,s=[],a={};if(h==="darwin")i="open",e.wait&&s.push("--wait-apps"),e.background&&s.push("--background"),e.newInstance&&s.push("--new"),r&&s.push("-a",r);else if(h==="win32"||I&&!De()&&!r){let f=await Fe();i=I?`${f}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,s.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),I||(a.windowsVerbatimArguments=!0);let u=["Start"];e.wait&&u.push("-Wait"),r?(u.push(`"\`"${r}\`""`,"-ArgumentList"),e.target&&t.unshift(e.target)):e.target&&u.push(`"${e.target}"`),t.length>0&&(t=t.map(m=>`"\`"${m}\`""`),u.push(t.join(","))),e.target=Buffer.from(u.join(" "),"utf16le").toString("base64")}else{if(r)i=r;else{let f=!__dirname||__dirname==="/",u=!1;try{await $.access(ne,ae.X_OK),u=!0}catch{}i=process.versions.electron||h==="android"||f||!u?"xdg-open":ne}t.length>0&&s.push(...t),e.wait||(a.stdio="ignore",a.detached=!0)}e.target&&s.push(e.target),h==="darwin"&&t.length>0&&s.push("--args",...t);let c=Oe.spawn(i,s,a);return e.wait?new Promise((f,u)=>{c.once("error",u),c.once("close",m=>{if(!e.allowNonzeroExitCode&&m>0){u(new Error(`Exited with code ${m}`));return}f(c)})}):(c.unref(),c)},_=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return v({...r,target:e})},_e=(e,r)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:t=[]}=r||{};if(t!=null&&!Array.isArray(t))throw new TypeError("Expected `appArguments` as Array type");return v({...r,app:{name:e,arguments:t}})};function ie(e){if(typeof e=="string"||Array.isArray(e))return e;let{[oe]:r}=e;if(!r)throw new Error(`${oe} is not supported`);return r}function G({[h]:e},{wsl:r}){if(r&&I)return ie(r);if(!e)throw new Error(`${h} is not supported`);return ie(e)}var S={};F(S,"chrome",()=>G({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));F(S,"firefox",()=>G({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));F(S,"edge",()=>G({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));_.apps=S;_.openApp=_e;ce.exports=_});var qe={};ye(qe,{commFilePath:()=>M,notifyRaycast:()=>Ge,updatePid:()=>fe});module.exports=we(qe);var L=require("node:child_process"),d=p(require("node:fs")),x=p(require("node:path"));var k=p(require("node:fs")),P=p(require("node:path")),Y=p(require("node:os"));var q=p(require("node:path")),W=p(require("node:fs"));function E(){let e;try{e=q.resolve("package.json")}catch(t){throw new Error(`cannot resolve package manifest path: ${t}`)}let r;try{r=JSON.parse(W.readFileSync(e,"utf8"))}catch(t){throw new Error(`cannot read package manifest: ${t}`)}return r.name=r.name.replace(/^@workaround/g,""),r}var be="KqAdcGhNfBKiUpfjD3nU3VNgh1t0iMPoX2hYEkN9d4I",xe="e69bae0ec90f5e838555",g={},T;function w(){let e=E();if(!e.name)throw new Error("extension name in manifest cannot be empty");return P.join(ke(),"extensions",e.name)}function J(){let e=C(T);return e?`com.raycast.macos.${e}`:"com.raycast.macos"}function H(){return`raycast${C(T)}`}function Ae(e){switch(e){case"raycastApiURL":return process.env.RAY_APIURL||g.APIURL||"https://www.raycast.com";case"raycastAccessToken":return process.env.RAY_Token||g.Token||g.AccessToken||"";case"raycastClientId":return process.env.RAY_ClientID||g.ClientID||be;case"githubClientId":return process.env.RAY_GithubClientID||g.GithubClientID||xe;case"githubAccessToken":return process.env.GITHUB_ACCESS_TOKEN||g.GithubAccessToken||"";case"flavorName":return process.env.RAY_Target||(typeof g.Target>"u"?C("release"):g.Target)}}function C(e){switch(e){case"debug":return"debug";case"internal":return"internal";case"release":return"";case void 0:return Ae("flavorName")}}function Ee(){let e=C(T);return e==""?"raycast":`raycast-${e}`}function ke(){let e=P.join(Y.default.homedir(),".config",Ee());return k.mkdirSync(e,{recursive:!0}),e}var l=p(z());var Qe=(0,l.blue)((0,l.dim)("internal only"));function B(e,r,t){console.log($e[e]+r),typeof t?.exit<"u"&&process.exit(t.exit)}var $e={wait:`\u{1F550}${(0,l.blue)("wait")}  - `,info:`${process.env.GITHUB_ACTIONS==="true"?"\u2139\uFE0F":"\u2139\uFE0F "}${(0,l.cyan)("info")}  - `,success:`\u2705${(0,l.green)("ready")}  - `,warn:`${process.env.GITHUB_ACTIONS==="true"?"\u26A0\uFE0F":"\u26A0\uFE0F "}${(0,l.yellow)("warn")}  - `,error:`\u{1F4A5}${(0,l.red)("error")}  - `,event:`\u26A1\uFE0F${(0,l.magenta)("event")}  - `,paymentPrompt:`\u{1F4B0}${(0,l.yellowBright)("plan")}  - `};var le=p(ue());async function Ge(e,r){let t=!1;switch(e){case"start":{je(),fe(),Me();break}case"stop":{try{d.unlinkSync(M("log"))}catch{}try{d.unlinkSync(M("pid"))}catch{}return}default:t=!0}let i;try{i=E()}catch{return}Ue()||B("warn","Raycast is no running"),t?Le(i.name,e,r):await j(i.name,e,r)}function M(e){return x.join(w(),e==="log"?"dev.log":"cli.pid")}function fe(){let e=w();try{d.mkdirSync(e,{recursive:!0})}catch(t){throw new Error(`cannot create output directory (${t.message})`)}let r=process.pid.toString();try{d.writeFileSync(x.join(e,"cli.pid"),r,{mode:420})}catch(t){throw new Error(`cannot write pid file (${t.message})`)}}function Me(){let e=w();try{d.mkdirSync(e,{recursive:!0})}catch(r){throw new Error(`cannot create output directory (${r.message})`)}try{d.writeFileSync(x.join(e,"dev.log"),"")}catch(r){throw new Error(`cannot write log file (${r.message})`)}}function je(){let e=x.join(w(),"cli.pid");try{let i=`kill -9 ${d.readFileSync(e,"utf8").trim()}`;(0,L.execSync)(i,{shell:"/bin/sh"})}catch{}}var b=null;function Le(e,r,t){b?(clearTimeout(b),b=setTimeout(()=>{j(e,r,t)},300)):(j(e,r,t),b=setTimeout(()=>{b=null},300))}async function j(e,r,t){let i=process.cwd(),s=`${H()}://cli/${e}/${r}?cwd=${encodeURIComponent(i)}&info=${encodeURIComponent(t||"")}`;try{await(0,le.default)(s,{background:!0})}catch(a){B("error",`cannot notify Raycast (${a.message})`)}}function Ue(){let r=J(),t="ps -e -o args | grep -v grep | grep -i contents/macos/raycast",i;try{i=(0,L.execSync)(t,{shell:"/bin/sh",encoding:"utf8"})}catch{return!1}let s=i.trim();if(s==="")return!1;let a=s.split(`
`);for(let c of a){let f=c.indexOf("/Contents/MacOS/Raycast");if(f>-1&&(c=c.substring(0,f)),!!d.existsSync(c))if(0)try{}catch(Je){}else return!0}return!1}0&&(module.exports={commFilePath,notifyRaycast,updatePid});
